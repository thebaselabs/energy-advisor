export default async function handler(req, res) {
  // Get data from your website
  const { activity, profile } = JSON.parse(req.body);
  
  // YOUR API KEY IS SAFE HERE - we'll add it later
  const GEMINI_API_KEY = process.env.GEMINI_API_KEY;
  
  const prompt = `USER PROFILE:
- Weight: ${profile.weight} kg
- Age: ${profile.age} years  
- Gender: ${profile.gender}
- Fitness Level: ${profile.fitnessLevel}

ACTIVITY: "${activity}"

[KEEP YOUR EXISTING AI PROMPT HERE - copy from your current code]`;

  // Call Google AI (key is hidden)
  const response = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      contents: [{ parts: [{ text: prompt }] }],
      generationConfig: {
        temperature: 0.1,
        maxOutputTokens: 2000,
      }
    })
  });
  
  const data = await response.json();
  res.json(data);
}